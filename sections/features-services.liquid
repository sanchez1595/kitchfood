<section 
  class="features-services color-{{ section.settings.color_scheme }}"
  style="
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --section-bg-color: {{ section.settings.background_color }};
    --text-color: {{ section.settings.text_color }};
    --icon-color: {{ section.settings.icon_color }};
    --card-bg-color: {{ section.settings.card_background_color }};
  "
>
  <div class="features-services__container">
    {% if section.settings.heading != blank %}
      <div class="features-services__header">
        <h2 class="features-services__heading">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="features-services__subheading">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="features-services__grid">
      {% if section.blocks.size > 0 %}
        {% for block in section.blocks %}
          <div class="features-services__feature" {{ block.shopify_attributes }}>
            <div class="features-services__feature-content">
              {% if block.settings.icon_type == 'svg' and block.settings.custom_icon != blank %}
                <div class="features-services__icon features-services__icon--custom">
                  {{ block.settings.custom_icon }}
                </div>
              {% elsif block.settings.icon_type == 'image' and block.settings.icon_image %}
                <div class="features-services__icon features-services__icon--image">
                  <img 
                    src="{{ block.settings.icon_image | image_url: width: 80 }}"
                    alt="{{ block.settings.icon_image.alt | escape }}"
                    width="80"
                    height="80"
                    loading="lazy"
                  >
                </div>
              {% else %}
                <div class="features-services__icon features-services__icon--default">
                  {% case block.settings.default_icon %}
                    {% when 'service' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M24 4C35.046 4 44 12.954 44 24C44 35.046 35.046 44 24 44C12.954 44 4 35.046 4 24C4 12.954 12.954 4 24 4Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M24 16V32M16 24H32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      </svg>
                    {% when 'quality' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M24 4L30.18 14.82L42 16.64L33 25.46L35.36 37.18L24 31.77L12.64 37.18L15 25.46L6 16.64L17.82 14.82L24 4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                      </svg>
                    {% when 'support' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M44 24C44 35.046 35.046 44 24 44C12.954 44 4 35.046 4 24C4 12.954 12.954 4 24 4C35.046 4 44 12.954 44 24Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M18 22C18 18.686 20.686 16 24 16C27.314 16 30 18.686 30 22C30 24.973 27.878 27.441 25.063 27.917C24.465 28.025 24 28.522 24 29.125V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="24" cy="36" r="1" fill="currentColor"/>
                      </svg>
                    {% when 'shipping' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M6 10H8L11 24H37L40 12H13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="16" cy="32" r="4" stroke="currentColor" stroke-width="2"/>
                        <circle cx="32" cy="32" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 32H28" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      </svg>
                    {% when 'warranty' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M24 4L30 10L38 8L40 16L48 18L44 26L46 34L38 36L36 44L28 42L24 48L20 42L12 44L10 36L2 34L6 26L2 18L10 16L12 8L20 10L24 4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                        <path d="M32 18L22 28L16 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    {% when 'installation' %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M22 38H26C28.2091 38 30 36.2091 30 34V26C30 23.7909 28.2091 22 26 22H22C19.7909 22 18 23.7909 18 26V34C18 36.2091 19.7909 38 22 38Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M18 22V18C18 14.6863 20.6863 12 24 12C27.3137 12 30 14.6863 30 18V22" stroke="currentColor" stroke-width="2"/>
                        <path d="M8 14V34C8 37.3137 10.6863 40 14 40H34C37.3137 40 40 37.3137 40 34V14C40 10.6863 37.3137 8 34 8H14C10.6863 8 8 10.6863 8 14Z" stroke="currentColor" stroke-width="2"/>
                      </svg>
                    {% else %}
                      <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M24 4C35.046 4 44 12.954 44 24C44 35.046 35.046 44 24 44C12.954 44 4 35.046 4 24C4 12.954 12.954 4 24 4Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 18L28 26L20 34" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                  {% endcase %}
                </div>
              {% endif %}

              <div class="features-services__text-content">
                {% if block.settings.title != blank %}
                  <h3 class="features-services__title">{{ block.settings.title }}</h3>
                {% endif %}
                
                {% if block.settings.description != blank %}
                  <p class="features-services__description">{{ block.settings.description }}</p>
                {% endif %}

                {% if block.settings.link_text != blank and block.settings.link_url != blank %}
                  <a 
                    href="{{ block.settings.link_url }}" 
                    class="features-services__link"
                    {% if block.settings.open_in_new_tab %}target="_blank" rel="noopener"{% endif %}
                  >
                    {{ block.settings.link_text }}
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <!-- Default features when no blocks exist -->
        {% assign default_features = 'service,quality,support' | split: ',' %}
        {% assign default_titles = 'Servicio Técnico Especializado,Calidad Garantizada,Soporte 24/7' | split: ',' %}
        {% assign default_descriptions = 'Nuestro equipo de técnicos certificados brinda asesoramiento personalizado para optimizar el rendimiento de su cocina profesional,Todos nuestros equipos cumplen con los más altos estándares de calidad internacional y vienen con garantía extendida,Ofrecemos soporte técnico continuo para resolver cualquier inconveniente y mantener su operación funcionando sin interrupciones' | split: ',' %}
        
        {% for feature in default_features %}
          <div class="features-services__feature">
            <div class="features-services__feature-content">
              <div class="features-services__icon features-services__icon--default">
                {% case feature %}
                  {% when 'service' %}
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                      <path d="M24 4C35.046 4 44 12.954 44 24C44 35.046 35.046 44 24 44C12.954 44 4 35.046 4 24C4 12.954 12.954 4 24 4Z" stroke="currentColor" stroke-width="2"/>
                      <path d="M24 16V32M16 24H32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  {% when 'quality' %}
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                      <path d="M24 4L30.18 14.82L42 16.64L33 25.46L35.36 37.18L24 31.77L12.64 37.18L15 25.46L6 16.64L17.82 14.82L24 4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    </svg>
                  {% when 'support' %}
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                      <path d="M44 24C44 35.046 35.046 44 24 44C12.954 44 4 35.046 4 24C4 12.954 12.954 4 24 4C35.046 4 44 12.954 44 24Z" stroke="currentColor" stroke-width="2"/>
                      <path d="M18 22C18 18.686 20.686 16 24 16C27.314 16 30 18.686 30 22C30 24.973 27.878 27.441 25.063 27.917C24.465 28.025 24 28.522 24 29.125V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      <circle cx="24" cy="36" r="1" fill="currentColor"/>
                    </svg>
                {% endcase %}
              </div>

              <div class="features-services__text-content">
                <h3 class="features-services__title">{{ default_titles[forloop.index0] }}</h3>
                <p class="features-services__description">{{ default_descriptions[forloop.index0] }}</p>
              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</section>

{% stylesheet %}
  .features-services {
    padding: var(--section-padding-top, 80px) 0 var(--section-padding-bottom, 80px);
    background-color: var(--section-bg-color, #ffffff);
  }

  .features-services__container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .features-services__header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .features-services__heading {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 700;
    margin: 0 0 1rem 0;
    color: var(--text-color, #333333);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  }

  .features-services__subheading {
    font-size: 1.1rem;
    color: var(--text-color, #333333);
    opacity: 0.8;
    margin: 0;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .features-services__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2.5rem;
    align-items: start;
  }

  .features-services__feature {
    position: relative;
    height: 100%;
  }

  .features-services__feature-content {
    background-color: var(--card-bg-color, transparent);
    padding: 2rem;
    border-radius: 12px;
    height: 100%;
    display: flex;
    flex-direction: column;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.05);
  }

  .features-services__feature:hover .features-services__feature-content {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.1);
  }

  .features-services__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem auto;
    color: var(--icon-color, #ff6b35);
    transition: all 0.3s ease;
  }

  .features-services__icon--image {
    border-radius: 50%;
    overflow: hidden;
    background-color: rgba(0, 0, 0, 0.05);
  }

  .features-services__icon--image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .features-services__icon--custom {
    color: var(--icon-color, #ff6b35);
  }

  .features-services__icon--custom svg {
    width: 48px;
    height: 48px;
  }

  .features-services__feature:hover .features-services__icon {
    transform: scale(1.1);
  }

  .features-services__text-content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .features-services__title {
    font-size: 1.3rem;
    font-weight: 700;
    margin: 0 0 1rem 0;
    color: var(--text-color, #333333);
    line-height: 1.3;
  }

  .features-services__description {
    font-size: 1rem;
    line-height: 1.6;
    margin: 0 0 1.5rem 0;
    color: var(--text-color, #333333);
    opacity: 0.8;
    flex: 1;
  }

  .features-services__link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--icon-color, #ff6b35);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    margin-top: auto;
    justify-self: flex-start;
  }

  .features-services__link:hover {
    transform: translateX(4px);
  }

  .features-services__link svg {
    transition: transform 0.3s ease;
  }

  .features-services__link:hover svg {
    transform: translateX(2px);
  }

  /* Layout Variations */
  .features-services[data-layout="horizontal"] .features-services__feature-content {
    flex-direction: row;
    text-align: left;
    gap: 1.5rem;
  }

  .features-services[data-layout="horizontal"] .features-services__icon {
    flex-shrink: 0;
    margin: 0;
  }

  .features-services[data-layout="horizontal"] .features-services__text-content {
    flex: 1;
  }

  /* Responsive Design */
  @media screen and (max-width: 968px) {
    .features-services__grid {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }

    .features-services[data-layout="horizontal"] .features-services__feature-content {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }

    .features-services[data-layout="horizontal"] .features-services__icon {
      margin: 0 auto 1rem auto;
    }
  }

  @media screen and (max-width: 768px) {
    .features-services {
      padding: 60px 0;
    }

    .features-services__container {
      padding: 0 1rem;
    }

    .features-services__header {
      margin-bottom: 3rem;
    }

    .features-services__grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .features-services__feature-content {
      padding: 1.5rem;
    }

    .features-services__icon {
      width: 60px;
      height: 60px;
      margin-bottom: 1rem;
    }

    .features-services__icon svg {
      width: 36px;
      height: 36px;
    }

    .features-services__title {
      font-size: 1.2rem;
    }

    .features-services__description {
      font-size: 0.95rem;
    }
  }

  @media screen and (max-width: 480px) {
    .features-services__feature-content {
      padding: 1rem;
    }

    .features-services__icon {
      width: 50px;
      height: 50px;
    }

    .features-services__icon svg {
      width: 30px;
      height: 30px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Features & Services",
  "tag": "section",
  "class": "features-services-wrapper section-wrapper",
  "max_blocks": 6,
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Servicio Especializado"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Nuestro equipo de especialistas brinda asesoramiento técnico personalizado para optimizar el rendimiento de su cocina profesional."
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "checkbox",
          "id": "open_in_new_tab",
          "label": "Open link in new tab",
          "default": false
        },
        {
          "type": "header",
          "content": "Icon"
        },
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon type",
          "options": [
            {
              "value": "default",
              "label": "Default icons"
            },
            {
              "value": "image",
              "label": "Image"
            },
            {
              "value": "svg",
              "label": "Custom SVG"
            }
          ],
          "default": "default"
        },
        {
          "type": "select",
          "id": "default_icon",
          "label": "Default icon",
          "options": [
            {
              "value": "service",
              "label": "Service"
            },
            {
              "value": "quality",
              "label": "Quality"
            },
            {
              "value": "support",
              "label": "Support"
            },
            {
              "value": "shipping",
              "label": "Shipping"
            },
            {
              "value": "warranty",
              "label": "Warranty"
            },
            {
              "value": "installation",
              "label": "Installation"
            }
          ],
          "default": "service",
          "info": "Only used when icon type is 'Default icons'"
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon image",
          "info": "Only used when icon type is 'Image'"
        },
        {
          "type": "html",
          "id": "custom_icon",
          "label": "Custom SVG code",
          "info": "Only used when icon type is 'Custom SVG'. Paste your SVG code here."
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Nuestros Servicios"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Ofrecemos soluciones integrales para tu cocina profesional"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout style",
      "options": [
        {
          "value": "vertical",
          "label": "Vertical (icon top)"
        },
        {
          "value": "horizontal",
          "label": "Horizontal (icon left)"
        }
      ],
      "default": "vertical"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#ff6b35"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card background color",
      "default": "transparent"
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 80
    }
  ],
  "presets": [
    {
      "name": "Features & Services",
      "category": "Text",
      "settings": {
        "heading": "Nuestros Servicios",
        "subheading": "Ofrecemos soluciones integrales para tu cocina profesional"
      },
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "title": "Servicio Técnico Especializado",
            "description": "Nuestro equipo de técnicos certificados brinda asesoramiento personalizado para optimizar el rendimiento de su cocina profesional.",
            "default_icon": "service"
          }
        },
        {
          "type": "feature",
          "settings": {
            "title": "Calidad Garantizada",
            "description": "Todos nuestros equipos cumplen con los más altos estándares de calidad internacional y vienen con garantía extendida.",
            "default_icon": "quality"
          }
        },
        {
          "type": "feature",
          "settings": {
            "title": "Soporte 24/7",
            "description": "Ofrecemos soporte técnico continuo para resolver cualquier inconveniente y mantener su operación funcionando sin interrupciones.",
            "default_icon": "support"
          }
        }
      ]
    }
  ]
}
{% endschema %}